

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Base exporter &mdash; brian2tools  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Markdown exporter" href="mdexporter_user.html" />
    <link rel="prev" title="NeuroML importer" href="nmlimport.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> brian2tools
          

          
          </a>

          
            
            
              <div class="version">
                0.2.1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User’s guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">Plotting tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporter_user.html">NeuroML exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="nmlimport.html">NeuroML importer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Base exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="mdexporter_user.html">Markdown exporter</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/brian2tools.html">brian2tools package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">brian2tools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">User’s guide</a> &raquo;</li>
        
      <li>Base exporter</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/user/baseexporter_user.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="base-exporter">
<h1>Base exporter<a class="headerlink" href="#base-exporter" title="Permalink to this headline">¶</a></h1>
<p>This is the user documentation of the <a class="reference internal" href="../reference/brian2tools.baseexport.html#module-brian2tools.baseexport" title="brian2tools.baseexport"><code class="xref py py-obj docutils literal notranslate"><span class="pre">baseexport</span></code></a> package, that
provides functionality to represent Brian2 models in a standard dictionary
format. The standard dictionary has a simple and easy to access hierarchy of model
information, that can be used for various model description exporters and custom
descriptions.</p>
<p>The <a class="reference internal" href="../reference/brian2tools.baseexport.html#module-brian2tools.baseexport" title="brian2tools.baseexport"><code class="xref py py-obj docutils literal notranslate"><span class="pre">baseexport</span></code></a> package is not meant to use directly but to
provide general framework to use other model description exporters on top of it.
However, the standard dictionary can be easily accessed as mentioned in the
<a class="reference internal" href="#working-example"><span class="std std-ref">Working Example</span></a> section.</p>
<div class="contents local topic" id="overview">
<p class="topic-title">Overview</p>
<ul class="simple">
<li><p><a class="reference internal" href="#working-example" id="id2">Working example</a></p></li>
<li><p><a class="reference internal" href="#limitations" id="id3">Limitations</a></p></li>
</ul>
</div>
<div class="section" id="working-example">
<span id="id1"></span><h2><a class="toc-backref" href="#id2">Working example</a><a class="headerlink" href="#working-example" title="Permalink to this headline">¶</a></h2>
<p>Once the <code class="docutils literal notranslate"><span class="pre">device.build()</span></code> is called, the standard dictionary can be accessed by
<code class="docutils literal notranslate"><span class="pre">device.runs</span></code> variable. As a working example, let us take a
(<a class="reference external" href="https://brian2.readthedocs.io/en/stable/examples/IF_curve_LIF.html">simple unconnected Integrate &amp; Fire neuronal model</a>)
with refractoriness and initializations,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">brian2</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">brian2tools.baseexport</span>
<span class="kn">import</span> <span class="nn">pprint</span>    <span class="c1"># to pretty print dictionary</span>

<span class="n">set_device</span><span class="p">(</span><span class="s1">&#39;exporter&#39;</span><span class="p">)</span>   <span class="c1"># set device mode</span>

<span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">duration</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="n">second</span>
<span class="n">tau</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="n">ms</span>
<span class="n">v_th</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">volt</span>

<span class="n">eqn</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">dv/dt = (v_rest - v) / tau : volt (unless refractory)</span>
<span class="s1">v_rest : volt</span>
<span class="s1">&#39;&#39;&#39;</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">NeuronGroup</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">eqn</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="s1">&#39;v &gt; v_th&#39;</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="s1">&#39;v = v_rest&#39;</span><span class="p">,</span>
                    <span class="n">refractory</span><span class="o">=</span><span class="mi">5</span><span class="o">*</span><span class="n">ms</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;euler&#39;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*</span><span class="n">mV</span>
<span class="n">group</span><span class="o">.</span><span class="n">v_rest</span> <span class="o">=</span> <span class="s1">&#39;rand() * 20*mV * i / (N-1)&#39;</span>

<span class="n">statemonitor</span> <span class="o">=</span> <span class="n">StateMonitor</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">spikemonitor</span> <span class="o">=</span> <span class="n">SpikeMonitor</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">record</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">run</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

<span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">runs</span><span class="p">)</span>   <span class="c1"># print standard dictionary</span>
</pre></div>
</div>
<p>The output standard dictionary would look similar to,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="s1">&#39;components&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;neurongroup&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                                <span class="s1">&#39;equations&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;v&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;expr&#39;</span><span class="p">:</span> <span class="s1">&#39;(v_rest - v) / tau&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;flags&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unless refractory&#39;</span><span class="p">],</span>
                                                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;differential equation&#39;</span><span class="p">,</span>
                                                    <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="n">volt</span><span class="p">,</span>
                                                    <span class="s1">&#39;var_type&#39;</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">},</span>
                                                <span class="s1">&#39;v_rest&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;parameter&#39;</span><span class="p">,</span>
                                                        <span class="s1">&#39;unit&#39;</span><span class="p">:</span> <span class="n">volt</span><span class="p">,</span>
                                                        <span class="s1">&#39;var_type&#39;</span><span class="p">:</span> <span class="s1">&#39;float&#39;</span><span class="p">}},</span>
                                <span class="s1">&#39;events&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;spike&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;refractory&#39;</span><span class="p">:</span> <span class="mf">5.</span> <span class="o">*</span> <span class="n">msecond</span><span class="p">,</span>
                                                    <span class="s1">&#39;reset&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;v = v_rest&#39;</span><span class="p">,</span>
                                                                <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">100.</span> <span class="o">*</span> <span class="n">usecond</span><span class="p">,</span>
                                                                <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                                <span class="s1">&#39;when&#39;</span><span class="p">:</span> <span class="s1">&#39;resets&#39;</span><span class="p">},</span>
                                                    <span class="s1">&#39;threshold&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;v &gt; v_th&#39;</span><span class="p">,</span>
                                                                    <span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">100.</span> <span class="o">*</span> <span class="n">usecond</span><span class="p">,</span>
                                                                    <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                                                    <span class="s1">&#39;when&#39;</span><span class="p">:</span> <span class="s1">&#39;thresholds&#39;</span><span class="p">}}},</span>
                                <span class="s1">&#39;identifiers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;tau&#39;</span><span class="p">:</span> <span class="mf">10.</span> <span class="o">*</span> <span class="n">msecond</span><span class="p">,</span>
                                                <span class="s1">&#39;v_th&#39;</span><span class="p">:</span> <span class="mf">1.</span> <span class="o">*</span> <span class="n">volt</span><span class="p">},</span>
                                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;neurongroup&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;user_method&#39;</span><span class="p">:</span> <span class="s1">&#39;euler&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;when&#39;</span><span class="p">:</span> <span class="s1">&#39;groups&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;spikemonitor&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">100.</span> <span class="o">*</span> <span class="n">usecond</span><span class="p">,</span>
                                <span class="s1">&#39;event&#39;</span><span class="p">:</span> <span class="s1">&#39;spike&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;spikemonitor&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="s1">&#39;record&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;neurongroup&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;source_size&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                                <span class="s1">&#39;variables&#39;</span><span class="p">:</span> <span class="p">[],</span>
                                <span class="s1">&#39;when&#39;</span><span class="p">:</span> <span class="s1">&#39;thresholds&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;statemonitor&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;dt&#39;</span><span class="p">:</span> <span class="mf">100.</span> <span class="o">*</span> <span class="n">usecond</span><span class="p">,</span>
                                <span class="s1">&#39;n_indices&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;statemonitor&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;order&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="s1">&#39;record&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                                <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;neurongroup&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;variables&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;when&#39;</span><span class="p">:</span> <span class="s1">&#39;start&#39;</span><span class="p">}]},</span>
<span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="mf">1.</span> <span class="o">*</span> <span class="n">second</span><span class="p">,</span>
<span class="s1">&#39;initializers_connectors&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                            <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;neurongroup&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;initializer&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mf">0.</span> <span class="o">*</span> <span class="n">volt</span><span class="p">,</span>
                            <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;v&#39;</span><span class="p">},</span>
                            <span class="p">{</span><span class="s1">&#39;identifiers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">},</span>
                            <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;True&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;source&#39;</span><span class="p">:</span> <span class="s1">&#39;neurongroup&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;initializer&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="s1">&#39;rand() * 20*mV * i / (N-1)&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;v_rest&#39;</span><span class="p">}]}]</span>
</pre></div>
</div>
<p>To the user side, the changes required to use the exporter are very minimal
(very similar to accessing other Brian2 device modes. In the standard Brian code,
adding <a class="reference internal" href="../reference/brian2tools.baseexport.html#module-brian2tools.baseexport" title="brian2tools.baseexport"><code class="xref py py-obj docutils literal notranslate"><span class="pre">baseexport</span></code></a> import statement and setting device <code class="docutils literal notranslate"><span class="pre">exporter</span></code>
with proper <code class="docutils literal notranslate"><span class="pre">build_options</span></code> will be sufficient to use the exporter. To print the dictionary in <code class="docutils literal notranslate"><span class="pre">stdout</span></code>,
<code class="docutils literal notranslate"><span class="pre">debug</span></code> option shall also be used, apart from using <code class="docutils literal notranslate"><span class="pre">device.runs</span></code> variable.
The changes required to run in <code class="docutils literal notranslate"><span class="pre">debug</span></code> mode for the above example are,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">brian2</span> <span class="kn">import</span> <span class="o">*</span>
 <span class="kn">import</span> <span class="nn">brian2tools.baseexport</span>

 <span class="n">set_device</span><span class="p">(</span><span class="s1">&#39;exporter&#39;</span><span class="p">,</span> <span class="n">build_on_run</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>   <span class="c1"># build manually to run in debug mode</span>

<span class="o">.</span> <span class="o">.</span> <span class="o">.</span> <span class="o">.</span>

 <span class="n">run</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>

 <span class="n">device</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>   <span class="c1"># print standard dictionary</span>
</pre></div>
</div>
<p>Most of the standard dictionary items have the same object type as in Brian2. For instance,
<code class="docutils literal notranslate"><span class="pre">identifiers</span></code> and <code class="docutils literal notranslate"><span class="pre">dt</span></code> fields have values of type <a class="reference external" href="https://brian2.readthedocs.io/en/stable/reference/brian2.units.fundamentalunits.Quantity.html#brian2.units.fundamentalunits.Quantity" title="(in Brian 2 v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Quantity</span></code></a> but <code class="docutils literal notranslate"><span class="pre">N</span></code> (population size)
is of type <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
</div>
<div class="section" id="limitations">
<h2><a class="toc-backref" href="#id3">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h2>
<p>The Base export currently supports almost all Brian2 features except,</p>
<ul class="simple">
<li><p>Multicompartmental neurons (<a class="reference external" href="https://brian2.readthedocs.io/en/stable/reference/brian2.spatialneuron.spatialneuron.SpatialNeuron.html#brian2.spatialneuron.spatialneuron.SpatialNeuron" title="(in Brian 2 v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SpatialNeuron</span></code></a>)</p></li>
<li><p><a class="reference external" href="https://brian2.readthedocs.io/en/stable/reference/brian2.core.network.Network.html#brian2.core.network.Network.store" title="(in Brian 2 v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">store</span></code></a>/<a class="reference external" href="https://brian2.readthedocs.io/en/stable/reference/brian2.core.network.Network.html#brian2.core.network.Network.store" title="(in Brian 2 v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">store</span></code></a> mechanism</p></li>
<li><p>Multiple <a class="reference external" href="https://brian2.readthedocs.io/en/stable/reference/brian2.core.network.Network.html#brian2.core.network.Network" title="(in Brian 2 v2.4)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Network</span></code></a> objects</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mdexporter_user.html" class="btn btn-neutral float-right" title="Markdown exporter" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nmlimport.html" class="btn btn-neutral float-left" title="NeuroML importer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Brian authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>