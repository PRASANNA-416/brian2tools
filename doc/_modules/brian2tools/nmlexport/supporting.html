

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>brian2tools.nmlexport.supporting &mdash; brian2tools  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> brian2tools
          

          
          </a>

          
            
            
              <div class="version">
                0.2.1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user/index.html">User’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Developer’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../reference/brian2tools.html">brian2tools package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">brian2tools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>brian2tools.nmlexport.supporting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for brian2tools.nmlexport.supporting</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">xml.dom.minidom</span> <span class="k">as</span> <span class="nn">minidom</span>

<span class="kn">from</span> <span class="nn">brian2.units.allunits</span> <span class="kn">import</span> <span class="n">all_units</span>
<span class="kn">from</span> <span class="nn">brian2</span> <span class="kn">import</span> <span class="n">get_or_create_dimension</span>


<span class="n">name_to_unit</span> <span class="o">=</span> <span class="p">{</span><span class="n">u</span><span class="o">.</span><span class="n">dispname</span><span class="p">:</span> <span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">all_units</span><span class="p">}</span>


<div class="viewcode-block" id="from_string"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.from_string">[docs]</a><span class="k">def</span> <span class="nf">from_string</span><span class="p">(</span><span class="n">rep</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns `Quantity` object from text representation of a value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    rep : `str`</span>
<span class="sd">        text representation of a value with unit</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    q : `Quantity`</span>
<span class="sd">        Brian Quantity object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># match value</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;-?[0-9]+\.?([0-9]+)?[eE]?-?([0-9]+)?&#39;</span><span class="p">,</span> <span class="n">rep</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()]</span>
        <span class="n">rep</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Empty value given&quot;</span><span class="p">)</span>
    <span class="c1"># match unit</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39; ?([a-zA-Z]+)&#39;</span><span class="p">,</span> <span class="n">rep</span><span class="p">)</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">per</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># special case with per</span>
        <span class="k">if</span> <span class="n">unit</span> <span class="o">==</span> <span class="s1">&#39;per&#39;</span><span class="p">:</span>
            <span class="n">mper</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39; ?per_([a-zA-Z]+)&#39;</span><span class="p">,</span> <span class="n">rep</span><span class="p">)</span>
            <span class="n">per</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">mper</span><span class="o">.</span><span class="n">end</span><span class="p">()]</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="mi">4</span><span class="p">:]</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">mper</span>
        <span class="n">rep</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">():]</span>
    <span class="c1"># match exponent</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s1">&#39;-?([0-9]+)?&#39;</span><span class="p">,</span> <span class="n">rep</span><span class="p">)</span>
    <span class="n">exponent</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">m</span><span class="p">:</span>
        <span class="n">exponent</span> <span class="o">=</span> <span class="n">rep</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">()]</span>
    <span class="k">if</span> <span class="n">unit</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">per</span><span class="p">:</span>
            <span class="n">b2unit</span> <span class="o">=</span> <span class="mf">1.</span> <span class="o">/</span> <span class="n">name_to_unit</span><span class="p">[</span><span class="n">per</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">b2unit</span> <span class="o">=</span> <span class="n">name_to_unit</span><span class="p">[</span><span class="n">unit</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="n">exponent</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">b2unit</span><span class="o">**</span><span class="nb">float</span><span class="p">(</span><span class="n">exponent</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">*</span> <span class="n">b2unit</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="brian_unit_to_lems"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.brian_unit_to_lems">[docs]</a><span class="k">def</span> <span class="nf">brian_unit_to_lems</span><span class="p">(</span><span class="n">valunit</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns string representation of LEMS unit where * is between</span>
<span class="sd">    value and unit e.g. &quot;20. mV&quot; -&gt; &quot;20.*mV&quot;.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    valunit : `Quantity` or `str`</span>
<span class="sd">        text or brian2.Quantity representation of a value with unit</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    valstr : `str`</span>
<span class="sd">        string representation of LEMS unit</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">valunit</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;0&#39;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">valunit</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">valunit</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">valunit</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">valunit</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="read_nml_dims"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.read_nml_dims">[docs]</a><span class="k">def</span> <span class="nf">read_nml_dims</span><span class="p">(</span><span class="n">nmlcdpath</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read from `NeuroMLCoreDimensions.xml` all supported by LEMS</span>
<span class="sd">    dimensions and store it as a Python dict with name as a key</span>
<span class="sd">    and Brian2 unit as value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nmlcdpath : `str`, optional</span>
<span class="sd">        Path to &#39;NeuroMLCoreDimensions.xml&#39;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    lems_dimenssions : `dict`</span>
<span class="sd">        Dictionary with LEMS dimensions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nmlcdpath</span><span class="p">,</span> <span class="s2">&quot;NeuroMLCoreDimensions.xml&quot;</span><span class="p">)</span>
    <span class="n">domtree</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">domtree</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="n">dimsCollection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;Dimension&quot;</span><span class="p">)</span>
    <span class="n">order_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;j&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">}</span>
    <span class="n">lems_dimensions</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">dc</span> <span class="ow">in</span> <span class="n">dimsCollection</span><span class="p">:</span>
        <span class="n">name_</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="n">tmpdim_</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">7</span>  <span class="c1"># 7 base dimensions</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">order_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">dc</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
                <span class="n">tmpdim_</span><span class="p">[</span><span class="n">order_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dc</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>
        <span class="n">lems_dimensions</span><span class="p">[</span><span class="n">name_</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_or_create_dimension</span><span class="p">(</span><span class="n">tmpdim_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lems_dimensions</span></div>


<div class="viewcode-block" id="read_nml_units"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.read_nml_units">[docs]</a><span class="k">def</span> <span class="nf">read_nml_units</span><span class="p">(</span><span class="n">nmlcdpath</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read from &#39;NeuroMLCoreDimensions.xml&#39; all supported by LEMS</span>
<span class="sd">    units.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    nmlcdpath : `str`, optional</span>
<span class="sd">        Path to &#39;NeuroMLCoreDimensions.xml&#39;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    lems_units : `list`</span>
<span class="sd">        List with LEMS units.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">nmlcdpath</span><span class="p">,</span> <span class="s2">&quot;NeuroMLCoreDimensions.xml&quot;</span><span class="p">)</span>
    <span class="n">domtree</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">collection</span> <span class="o">=</span> <span class="n">domtree</span><span class="o">.</span><span class="n">documentElement</span>
    <span class="n">unitsCollection</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;Unit&quot;</span><span class="p">)</span>
    <span class="n">lems_units</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">uc</span> <span class="ow">in</span> <span class="n">unitsCollection</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">uc</span><span class="o">.</span><span class="n">hasAttribute</span><span class="p">(</span><span class="s1">&#39;symbol&#39;</span><span class="p">):</span>
            <span class="n">lems_units</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">uc</span><span class="o">.</span><span class="n">getAttribute</span><span class="p">(</span><span class="s1">&#39;symbol&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">lems_units</span></div>

<span class="c1">########################################</span>
<span class="c1"># All NeuroML2 syntax creation helpers</span>
<span class="c1">########################################</span>


<div class="viewcode-block" id="NeuroMLSimulation"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation">[docs]</a><span class="k">class</span> <span class="nc">NeuroMLSimulation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    NeuroMLSimulation class representing Simulation tag in NeuroML</span>
<span class="sd">    syntax as a XML DOM representation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="s2">&quot;1s&quot;</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="s2">&quot;0.1ms&quot;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        NeuroMLSimulation object constructor.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        simid : str</span>
<span class="sd">            simulation id.</span>
<span class="sd">        target : str</span>
<span class="sd">            target NeuroML object: component or network</span>
<span class="sd">        length : str, optional</span>
<span class="sd">            length of simulation, default 1 sec</span>
<span class="sd">        step : str, optional</span>
<span class="sd">            step of integration, default 0.1 ms</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">Document</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_simulation</span><span class="p">(</span><span class="n">simid</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">displays</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcolumns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventselections</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<div class="viewcode-block" id="NeuroMLSimulation.create_simulation"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.create_simulation">[docs]</a>    <span class="k">def</span> <span class="nf">create_simulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">simid</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Simulation element to DOM structure at init.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        simid : str</span>
<span class="sd">            simulation id.</span>
<span class="sd">        target : str</span>
<span class="sd">            target NeuroML object: component or network</span>
<span class="sd">        length : str, optional</span>
<span class="sd">            length of simulation, default 1 sec</span>
<span class="sd">        step : str, optional</span>
<span class="sd">            step of integration, default 0.1 ms</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;Simulation&#39;</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">simid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="n">target</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="n">length</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.update_simulation_attribute"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.update_simulation_attribute">[docs]</a>    <span class="k">def</span> <span class="nf">update_simulation_attribute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates simulation attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attr_name : str</span>
<span class="sd">            attribute name</span>
<span class="sd">        attr_value : str or int or float</span>
<span class="sd">            attribute value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="n">attr_value</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">attr_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_display"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_display">[docs]</a>    <span class="k">def</span> <span class="nf">add_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dispid</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">time_scale</span><span class="o">=</span><span class="s2">&quot;1ms&quot;</span><span class="p">,</span> <span class="n">xmin</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
                                  <span class="n">xmax</span><span class="o">=</span><span class="s2">&quot;1000&quot;</span><span class="p">,</span> <span class="n">ymin</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">ymax</span><span class="o">=</span><span class="s2">&quot;11&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Display element to Simulation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dispid : str</span>
<span class="sd">            display id</span>
<span class="sd">        title : str</span>
<span class="sd">            title printed on display window</span>
<span class="sd">        time_scale : str</span>
<span class="sd">            time scale of a plot</span>
<span class="sd">        xmin, xmax, ymin, ymax : str</span>
<span class="sd">            limits of plot</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;Display&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">dispid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">title</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;timeScale&quot;</span><span class="p">,</span> <span class="n">time_scale</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;xmin&quot;</span><span class="p">,</span> <span class="n">xmin</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;xmax&quot;</span><span class="p">,</span> <span class="n">xmax</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;ymin&quot;</span><span class="p">,</span> <span class="n">ymin</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;ymax&quot;</span><span class="p">,</span> <span class="n">ymax</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span><span class="p">]</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_line"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_line">[docs]</a>    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">linid</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="s2">&quot;1mV&quot;</span><span class="p">,</span> <span class="n">time_scale</span><span class="o">=</span><span class="s2">&quot;1ms&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a Line element to a recently added Display.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        linid : str</span>
<span class="sd">            line id</span>
<span class="sd">        quantity : str</span>
<span class="sd">            measure to plot</span>
<span class="sd">        scale : str</span>
<span class="sd">            scale of a function</span>
<span class="sd">        time_scale : str</span>
<span class="sd">            time scale of a line</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">,</span> <span class="s2">&quot;You need to add display first&quot;</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;Line&#39;</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">linid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;quantity&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;scale&quot;</span><span class="p">,</span> <span class="n">scale</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;timeScale&quot;</span><span class="p">,</span> <span class="n">time_scale</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="n">line</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_disp_idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_outputfile"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_outputfile">[docs]</a>    <span class="k">def</span> <span class="nf">add_outputfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfileid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;recordings.dat&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an OutputFile to Simulation.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        outfileid : str</span>
<span class="sd">            OutputFile id</span>
<span class="sd">        filename : str</span>
<span class="sd">            name of an output file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;OutputFile&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcolumns</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">outfileid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;fileName&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span><span class="p">]</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_outputcolumn"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_outputcolumn">[docs]</a>    <span class="k">def</span> <span class="nf">add_outputcolumn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ocid</span><span class="p">,</span> <span class="n">quantity</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an OutputColumn element to a recently added OutputFile tag.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ocid : str</span>
<span class="sd">            OutputColumn id</span>
<span class="sd">        quantity : str</span>
<span class="sd">            measure to store in a column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">,</span> <span class="s2">&quot;You need to add output_files first&quot;</span>
        <span class="n">outputcolumn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;OutputColumn&#39;</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">ocid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;quantity&quot;</span><span class="p">,</span> <span class="n">quantity</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="n">outputcolumn</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outcolumns</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_output_idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outputcolumn</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_eventoutputfile"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_eventoutputfile">[docs]</a>    <span class="k">def</span> <span class="nf">add_eventoutputfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outfileid</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;recordings.spikes&quot;</span><span class="p">,</span> <span class="n">format_</span><span class="o">=</span><span class="s2">&quot;TIME_ID&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an EventOutputFile element to a recently added Display.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        outfileid : str</span>
<span class="sd">            EventOutputFile id</span>
<span class="sd">        filename : str</span>
<span class="sd">            name of an output file</span>
<span class="sd">        format : str, optional</span>
<span class="sd">            format of data storage, default TIME_ID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;EventOutputFile&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventselections</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">outfileid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;fileName&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="n">format_</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span><span class="p">]</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.add_eventselection"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.add_eventselection">[docs]</a>    <span class="k">def</span> <span class="nf">add_eventselection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">esid</span><span class="p">,</span> <span class="n">select</span><span class="p">,</span> <span class="n">event_port</span><span class="o">=</span><span class="s2">&quot;spike&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an EventSelection element to a recently added EventOutputFile.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        esid : str</span>
<span class="sd">            EventSelection id</span>
<span class="sd">        select : str</span>
<span class="sd">            index of selected neuron</span>
<span class="sd">        event_port : str</span>
<span class="sd">            event port name, default &#39;spike&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">,</span> <span class="s2">&quot;You need to add EventOutputFile first&quot;</span>
        <span class="n">eventselection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;EventSelection&#39;</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">esid</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;select&quot;</span><span class="p">,</span> <span class="n">select</span><span class="p">),</span>
                      <span class="p">(</span><span class="s2">&quot;eventPort&quot;</span><span class="p">,</span> <span class="n">event_port</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="n">eventselection</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eventselections</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_event_output_idx</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">eventselection</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimulation.build"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimulation.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Builds NeuroML DOM structure of Simulation. It returns DOM</span>
<span class="sd">        object or it can be accessed by *object.simulation*.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        simulation : xml.minidom.dom</span>
<span class="sd">            DOM representation of simulation.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">displays</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">outcol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outcolumns</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">outcol</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_files</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">evsel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">eventselections</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">evsel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event_output_files</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulation</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="NeuroMLSimpleNetwork"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimpleNetwork">[docs]</a><span class="k">class</span> <span class="nc">NeuroMLSimpleNetwork</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    NeuroMLSimpleNetwork class representing network tag in NeuroML</span>
<span class="sd">    syntax as a XML DOM representation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        NeuroMLSimpleNetwork object constructor.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        simid : str</span>
<span class="sd">            network id.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">Document</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;network&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">id_</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="NeuroMLSimpleNetwork.add_component"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimpleNetwork.add_component">[docs]</a>    <span class="k">def</span> <span class="nf">add_component</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_</span><span class="p">,</span> <span class="n">type_</span><span class="p">,</span> <span class="o">**</span><span class="n">attributes</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Adds a component to a network.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id_ : str</span>
<span class="sd">            component id</span>
<span class="sd">        type_ : str</span>
<span class="sd">            type of component</span>
<span class="sd">        attributes : ..., optional</span>
<span class="sd">            more attributes</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;Component&#39;</span><span class="p">)</span>
        <span class="n">component</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">id_</span><span class="p">)</span>
        <span class="n">component</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">attr_name</span><span class="p">,</span> <span class="n">attr_value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">component</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">attr_name</span><span class="p">),</span> <span class="nb">str</span><span class="p">(</span><span class="n">attr_value</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">component</span><span class="p">)</span></div>

<div class="viewcode-block" id="NeuroMLSimpleNetwork.build"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLSimpleNetwork.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Builds NeuroML DOM structure of network. It returns DOM</span>
<span class="sd">        object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        network : xml.minidom.dom</span>
<span class="sd">            DOM representation of network.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">components</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">comp</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="NeuroMLPoissonGenerator"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLPoissonGenerator">[docs]</a><span class="k">class</span> <span class="nc">NeuroMLPoissonGenerator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Makes XML of spikeGeneratorPoisson for NeuroML2/LEMS simulation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poissid</span><span class="p">,</span> <span class="n">average_rate</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        NeuroMLPoissonGenerator object constructor.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        poissid : str</span>
<span class="sd">            generator id</span>
<span class="sd">        average_rate : str or int</span>
<span class="sd">            average rate of firing in Hz</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">Document</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;spikeGeneratorPoisson&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">poissid</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">average_rate</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
            <span class="n">average_rate</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">average_rate</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; Hz&#39;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">average_rate</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">average_rate</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Hz&#39;</span><span class="p">:</span>
                <span class="n">average_rate</span> <span class="o">+=</span> <span class="s1">&#39; Hz&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;averageRate&quot;</span><span class="p">,</span> <span class="n">average_rate</span><span class="p">)</span>

<div class="viewcode-block" id="NeuroMLPoissonGenerator.build"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLPoissonGenerator.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Builds NeuroML DOM structure of spikeGeneratorPoisson and returns it.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        generator : xml.minidom.dom</span>
<span class="sd">            DOM representation of generator.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="NeuroMLTarget"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLTarget">[docs]</a><span class="k">class</span> <span class="nc">NeuroMLTarget</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Makes XML of target of NeuroML2/LEMS simulation.</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        NeuroMLTarget object constructor.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        component : str</span>
<span class="sd">            target component</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">doc</span> <span class="o">=</span> <span class="n">minidom</span><span class="o">.</span><span class="n">Document</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc</span><span class="o">.</span><span class="n">createElement</span><span class="p">(</span><span class="s1">&#39;Target&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s2">&quot;component&quot;</span><span class="p">,</span> <span class="n">component</span><span class="p">)</span>

<div class="viewcode-block" id="NeuroMLTarget.build"><a class="viewcode-back" href="../../../reference/brian2tools.nmlexport.supporting.html#brian2tools.nmlexport.supporting.NeuroMLTarget.build">[docs]</a>    <span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Builds NeuroML DOM structure of target and returns it.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        target : xml.minidom.dom</span>
<span class="sd">            DOM representation of target.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Brian authors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>